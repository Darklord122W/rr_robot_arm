<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="rr_arm">
<xacro:arg name="is_ignition" default="true"/>
<xacro:include filename="$(find rr_arm)/urdf/rr_arm_gazebo.xacro"/>

  <!-- Include ros2_control Plugins -->
<xacro:include filename="$(find rr_arm)/urdf/rr_arm_ros2_control.xacro" />
<!-- Tunables -->
  <xacro:property name="L1" value="0.5"/>   <!-- link1 length (m) -->
  <xacro:property name="L2" value="0.4"/>   <!-- link2 length (m) -->
  <xacro:property name="R"  value="0.03"/>  <!-- link radius (m) -->
  <xacro:property name="m1" value="1.0"/>   <!-- link1 mass (kg) -->
  <xacro:property name="m2" value="0.8"/>   <!-- link2 mass (kg) -->

  <!-- Simple material -->
  <material name="gray"><color rgba="0.6 0.6 0.6 1.0"/></material>
  <material name="blue"><color rgba="0.2 0.4 0.9 1.0"/></material>

  <!-- World & base -->
  <link name="world"/>
  <joint name="world_to_base" type="fixed">
    <parent link="world"/>
    <child link="base_link"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <link name="base_link">
    <visual>
      <geometry><cylinder length="0.06" radius="0.08"/></geometry>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <material name="gray"/>
    </visual>
    <collision>
      <geometry><cylinder length="0.06" radius="0.08"/></geometry>
      <origin xyz="0 0 0" rpy="0 0 0"/>

    </collision>
    <inertial>
    <mass value="1.0"/>
    <inertia ixx="1" iyy="1" izz="1" ixy="0" ixz="0" iyz="0"/>
    </inertial>
  </link>

<link name="link1">
  <visual>
    <geometry><cylinder length="${L1}" radius="${R}"/></geometry>
    <!-- move center to L1/2 on X and rotate cylinder axis Zâ†’X -->
    <origin xyz="${L1/2} 0 0" rpy="0 1.5708 0"/>
    <material name="blue"/>
  </visual>
  <collision>
    <geometry><cylinder length="${L1}" radius="${R}"/></geometry>
    <origin xyz="${L1/2} 0 0" rpy="0 1.5708 0"/>
  </collision>
  <inertial>
    <mass value="1.0"/>
    <!-- keep CoM aligned with geometry -->
    <origin xyz="${L1/2} 0 0" rpy="0 1.5708 0"/>
    <inertia ixx="1" iyy="1" izz="1" ixy="0" ixz="0" iyz="0"/>
  </inertial>
</link>


  <joint name="joint1" type="revolute">
    <parent link="base_link"/>
    <child link="link1"/>
    <origin xyz="0 0 0.03" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-6.28318" upper="6.28318" effort="10" velocity="3.0"/>
    <dynamics damping="0.1"/>
  </joint>

<link name="link2">
  <visual>
    <geometry><cylinder length="${L2}" radius="${R}"/></geometry>
    <origin xyz="${L2/2} 0 0" rpy="0 1.5708 0"/>
  </visual>
  <collision>
    <geometry><cylinder length="${L2}" radius="${R}"/></geometry>
    <origin xyz="${L2/2} 0 0" rpy="0 1.5708 0"/>
  </collision>
  <inertial>
    <mass value="1.0"/>
    <origin xyz="${L2/2} 0 0" rpy="0 1.5708 0"/>
    <inertia ixx="1" iyy="1" izz="1" ixy="0" ixz="0" iyz="0"/>
  </inertial>
</link>



<joint name="joint2" type="revolute">
  <parent link="link1"/>
  <child link="link2"/>
  <origin xyz="${L1} 0 0"/>
  <axis xyz="0 0 1"/>  
  <limit lower="-6.28318" upper="6.28318" effort="10" velocity="3.0"/>
</joint>
<!-- ===== End-effector frame for tracing ===== -->
<link name="ee_link">
  <visual>
    <origin xyz="0 0 0"/>
    <geometry><sphere radius="0.01"/></geometry>
    <material name="ee_color"><color rgba="1 0 0 1"/></material>
  </visual>
  <collision>
    <geometry><sphere radius="0.01"/></geometry>
  </collision>
  <inertial>
    <mass value="1e-4"/>
    <inertia ixx="1e-8" iyy="1e-8" izz="1e-8" ixy="0" ixz="0" iyz="0"/>
  </inertial>
</link>

<!-- Fixed joint placing ee_link at the *tip* of link2 (links run along +X) -->
<joint name="joint_ee" type="fixed">
  <parent link="link2"/>
  <child link="ee_link"/>
  <origin xyz="${L2} 0 0" rpy="0 0 0"/>
</joint>

</robot>
